<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
  <title>数码之家-首页</title>
  <link rel="stylesheet" href="./style.css" />
  <!-- CSS only -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

  <!-- JS, Popper.js, and jQuery -->
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
  <div class="indexPage">
    <div class="header">
      <div class="nav">
        <a href="index.html">
          <div class="home">
            <img src="./public/avatar.jpg" alt="" width="40px" height="40px" />
            <span style="line-height: 40px;">数码之家</span>
          </div>
        </a>
        <div class="normal" style="display: none;">
          <ul>
            <a href="index.html">
              <li>首页</li>
            </a>
            <a href="news.html">
              <li>新闻</li>
            </a>
            <a href="about.html">
              <li>关于我们</li>
            </a>
          </ul>
        </div>
        <div class="mobile" style="display: none;">
          <img src="./public/menu.png" alt="" width="30px" height="30px" />
        </div>
      </div>

    </div>
    <div class="mobile-nav">
      <ul>
        <a href="index.html">
          <li>首页</li>
        </a>
        <a href="news.html">
          <li>新闻</li>
        </a>
        <a href="about.html">
          <li>关于我们</li>
        </a>
      </ul>
    </div>
    <div class="banner">
      <ul class="slide">
        <li>
          <img src="./public/banner/1b409e11e58627ed.jpg" alt="" srcset="" draggable="false" />
        </li>
        <li>
          <img src="./public/banner/7fa63f6a3f837c34.jpg" alt="" srcset="" draggable="false" />
        </li>
        <li>
          <img src="./public/banner/951ae72b2bf7edf2.jpg" alt="" srcset="" draggable="false" />
        </li>
        <li>
          <img src="./public/banner/e91577c15269fddf.jpg" alt="" srcset="" draggable="false" />
        </li>
      </ul>
      <ul class="active">
        <li class="slide-active">1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
      </ul>
    </div>
    <div class="container">
      <h2 style="margin: 16px auto;">服务范围</h2>
      <div>
        <h4>新品介绍</h4>
        <div class="product">
          <div class="product-item">
            <img src="./public/newProduct/华为matebook14.jpg" alt="" />
            <div class="description">
              <h4>华为HUAWEI MateBook 14 2020</h4>
              <p>
                华为HUAWEI MateBook 14 2020款全面屏轻薄笔记本电脑 十代酷睿(i5
                16G 512G MX350 触控屏 多屏协同)灰
              </p>
              <p class="info">
                2k炫丽全面屏，搭配MX350版独立显卡，超轻薄金属机身，多点触控，指纹识别，配合多屏协同畅享劲酷体验！
              </p>
            </div>
          </div>
        </div>
        <div class="product">
          <div class="product-item">
            <div class="description">
              <h4>联想(Lenovo)小新Air14</h4>
              <p>
                联想(Lenovo)小新Air14 2020锐龙版轻薄本
                全面屏办公笔记本电脑(6核R5-4600U 16G 512G 高色域)深空灰
              </p>
              <p class="info">
                【爆款#优惠300到手价4199,7月14日8点开抢】学生网课办公娱乐,100%sRGB,6核12线程，智能散热调节,指纹背光齐全,接口丰富可快充
              </p>
            </div>
            <img src="./public/newProduct/小新Air14.jpg" alt="" />
          </div>
        </div>
        <div class="product">
          <div class="product-item">
            <img src="./public/newProduct/thinkpadE14.jpg" alt="" />
            <div class="description">
              <h4>联想ThinkPad E14 锐龙版</h4>
              <p>
                联想ThinkPad E14
                锐龙版（1TCD）14英寸轻薄笔记本电脑（锐龙5-4500U 16G 512GSSD
                IPS高分屏）黑色
              </p>
              <p class="info">
                全新7nm，可扩充双SSD，黑阀隐私摄像头，12项军标稳定测试，ThinkCool智能散热，哈曼卡顿
              </p>
            </div>
          </div>
        </div>
      </div>
      <div>
        <h4>产品新闻</h4>
        <div class="news">
          <div class="row">

          </div>
        </div>
      </div>
    </div>
    <div class="footer">
      <div class="contact">
        <div class="row">
          <div class="col-6 col-sm-6 col-lg-3">
            <div class="contact-item">
              <img src="./public/map.png" alt="" />
              <div>
                福建省福州市仓山区建新镇金山大道618号金山工业区桔园洲园38号楼3层307室
              </div>
            </div>
          </div>
          <div class="col-6 col-sm-6 col-lg-3">
            <div class="contact-item">
              <img src="./public/email.png" alt="" />
              <div>
                test10086@qq.com
              </div>
            </div>
          </div>

          <div class="col-6 col-sm-6 col-lg-3">
            <div class="contact-item">
              <img src="./public/mobile-phone.png" alt="" />
              <div>
                18159879874
              </div>
            </div>
          </div>
          <div class="col-6 col-sm-6 col-lg-3">
            <div class="contact-item">
              <img src="./public/code.png" alt="" />
              <div>
                <a data-toggle="modal" data-target="#exampleModal" data-whatever="@getbootstrap"
                  style="cursor: pointer;">联系我们</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="copyright">
        版权所有&copy;数码之家
      </div>
    </div>
  </div>
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">联系我们</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="recipient-name" class="col-form-label">邮箱:</label>
              <input type="email" class="form-control modal-input" id="exampleInputEmail1" aria-describedby="emailHelp">
            </div>
            <div class="form-group">
              <label for="recipient-name" class="col-form-label">电话:</label>
              <input type="email" class="form-control modal-input" id="exampleInputEmail1" aria-describedby="emailHelp">
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label">信息:</label>
              <textarea class="form-control modal-textarea" id="message-text"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-primary">发送信息</button>
        </div>
      </div>
    </div>
  </div>
</body>
<script src="./script.js"></script>
<script>
  window.onresize = function () {
    let index = $(".slide-active").text() - 1;
    let width = $(document).width() + getScrollbarWidth();
    $(".slide").css("left", `-${width * index}px`);
    if (width < 920) {
      $(".banner").css("display", "none");
      let img = $(".product-item:eq(1) img");
      let des = $(".product-item:eq(1) .description");
      img.insertBefore(des);
    }
    if (width > 920) {
      $(".banner").css("display", "block");
      let img = $(".product-item:eq(1) img");
      let des = $(".product-item:eq(1) .description");
      des.insertBefore(img);
    }
  };
  $(document).ready(function () {
    $(".active li").click(function () {
      $(".active li").removeClass("slide-active");
      let width = $(document).width() + getScrollbarWidth();
      let nowClick = $(this);
      nowClick.addClass("slide-active");
      let index = nowClick.text() - 1;
      $(".slide").animate({
        left: `-${width * index}px`,
      });
    });
    $(".slide").mousedown(function (e) {
      e.stopPropagation()
      const side = this
      $(side).stop(true, false)
      let x = e.clientX
      let width = $(document).width() + getScrollbarWidth();
      let index = $(".slide-active").text() - 1;
      let movex = 0;
      let now = +$(side).css('left').replace('px', '');
      $(side).mousemove(function (me) {
        e.stopPropagation()
        movex = me.clientX
        $(side).css({
          left: `${now - (x - movex)}px`,
        });
      })
      $(side).mouseup(function (e) {
        $(side).stop(true, false)
        $(side).off("mousemove")
        let upIndex = index
        // 增加
        if (index < 3 && movex > 0 && (x - movex) > 200) {
          $(side).stop(true, false)
          $(side).animate({
            left: `-${width * (upIndex + 1)}px`,
          });
          $(".active li").removeClass("slide-active");
          $(".active li").eq(upIndex + 1).addClass("slide-active");
          return
        }
        //减小
        if (index > 0 && movex > 0 && (x - movex) < -200) {
          $(side).stop(true, false)
          $(side).animate({
            left: `-${width * (upIndex - 1)}px`,
          });
          $(".active li").removeClass("slide-active");
          $(".active li").eq(upIndex - 1).addClass("slide-active");
          return
        }
        $(".slide").animate({
          left: `-${width * upIndex}px`,
        });
        $(".active li").removeClass("slide-active");
        $(".active li").eq(upIndex).addClass("slide-active");
      })
    })
    axios.get("http://mock-api.com/5g7EP2Ke.mock/news").then((res) => {
      const { data } = res;
      const news = data.filter((item, index) => index < 4);
      news.map((item, index) => {
        let newBarrage = $(
          `
            <div class='col-6 col-sm-6 col-lg-3 news-item'>
              <a href='news-detail.html?id=${index}'>
                <img src='${item.imgSrc}'></img>
                <div class='name'>${item.name}</div>
              </a>
            </div>
          `
        );
        $(".indexPage .news .row").append($(newBarrage));
      });
    });
  });
</script>

</html>