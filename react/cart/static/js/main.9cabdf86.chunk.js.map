{"version":3,"sources":["utils/request.js","models/shop.js","index.js","router.js"],"names":["request","axios","create","interceptors","response","use","data","Promise","reject","Error","error","alert","namespace","state","products","subscriptions","effects","getData","action","call","put","resolve","setTimeout","get","type","payload","filter","filterData","item","availableSizes","includes","reducers","save","sort","key","a","b","price","app","dva","history","createHashHistory","createLoading","router","require","default","start","menuGlobal","id","pid","name","icon","path","models","component","RouterConfig","map","index","dynamics","exact","dynamic"],"mappings":"0KAEMA,E,OAAUC,EAAMC,OAAO,IAG7BF,EAAQG,aAAaC,SAASC,KAC5B,SAACD,GACC,GAAIA,EACF,OAAOA,EAASE,KAEhBC,QAAQC,OAAO,IAAIC,MAAM,aAG7B,SAACC,GAEC,OADAC,MAAM,iCAASD,GACRH,QAAQC,OAAOE,MAGXV,QCjBA,WACbY,UAAW,OAEXC,MAAO,CACLC,SAAU,IAGZC,cAAe,GAEfC,QAAS,CACNC,QADM,qBACEC,EADF,8EAEL,OADiBC,EADZ,EACYA,KAAMC,EADlB,EACkBA,IADlB,SAEC,IAAIb,SAAQ,SAACc,GAAcC,WAAWD,EAAQ,QAF/C,OAGQ,OAHR,SAGcF,GAAK,kBAAMnB,EAAQuB,IAAI,sBAHrC,OAIL,OADMjB,EAHD,gBAICc,EAAI,CAAEI,KAAM,OAAQC,QAASnB,IAJ9B,0CAMNoB,OANM,yGAOQ,OADLD,EANH,EAMGA,QAAaN,EANhB,EAMgBA,KAAMC,EANtB,EAMsBA,IANtB,SAOcD,GAAK,kBAAMnB,EAAQuB,IAAI,sBAPrC,OAWL,OAJMjB,EAPD,OAQCqB,EAAarB,EAAKQ,SAASY,QAAO,SAACE,GAAD,OACtCA,EAAKC,eAAeC,SAASL,MAT1B,SAWCL,EAAI,CAAEI,KAAM,OAAQC,QAAS,CAAEX,SAAUa,KAX1C,2CAeTI,SAAU,CACRC,KADQ,SACHnB,EADG,GACwB,IAATP,EAAQ,EAAjBmB,QAEZ,OAAO,eAAKZ,EAAZ,GAAsBP,IAExB2B,KALQ,SAKHpB,EALG,GAKkB,IAAZY,EAAW,EAAXA,QACNX,EAAQ,YAAOD,EAAMC,UAC3B,OAAQW,EAAQS,KACd,IAAK,KACHpB,EAASmB,MAAK,SAACE,EAAGC,GAAJ,OAAUD,EAAEE,MAAQD,EAAEC,SACpC,MACF,IAAK,OACHvB,EAASmB,MAAK,SAACE,EAAGC,GAAJ,OAAUA,EAAEC,MAAQF,EAAEE,SAGxC,OAAO,eAAKxB,EAAZ,CAAmBC,iB,6FCxCzB,4DAMMwB,EAAMC,IAAI,CACdC,QAASC,gBAIXH,EAAIjC,IAAIqC,eAMRJ,EAAIK,OAAOC,EAAQ,KAAYC,SAG/BP,EAAIQ,MAAM,U,2HChBJC,EAAa,CACjB,CACEC,GAAI,OACJC,IAAK,IACLC,KAAM,OACNC,KAAM,OACNC,KAAM,IACNC,OAAQ,iBAAM,CAAC,yCAAyB,gCACxCC,UAAW,kBAAM,uDAuBNC,UApBf,YAAyC,IAAjBf,EAAgB,EAAhBA,QAASF,EAAO,EAAPA,IAC/B,OACE,kBAAC,SAAD,CAAQE,QAASA,GACf,kBAAC,SAAD,KACGO,EAAWS,KAAI,WAAwBC,GAAxB,IAAGL,EAAH,EAAGA,KAASM,EAAZ,+BACd,kBAAC,QAAD,CACExB,IAAKuB,EACLL,KAAMA,EACNO,OAAK,EACLL,UAAWM,IAAQ,aACjBtB,OACGoB,c","file":"static/js/main.9cabdf86.chunk.js","sourcesContent":["import axios from \"axios\";\r\n// 创建axios实例\r\nconst request = axios.create({});\r\n\r\n// response拦截器\r\nrequest.interceptors.response.use(\r\n  (response) => {\r\n    if (response) {\r\n      return response.data;\r\n    } else {\r\n      Promise.reject(new Error(\"error\"));\r\n    }\r\n  },\r\n  (error) => {\r\n    alert(\"请求出错！\", error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\nexport default request;\r\n","import request from \"../utils/request\";\r\nexport default {\r\n  namespace: \"shop\",\r\n\r\n  state: {\r\n    products: [],\r\n  },\r\n\r\n  subscriptions: {},\r\n\r\n  effects: {\r\n    *getData(action, { call, put }) {\r\n      yield new Promise((resolve) => { setTimeout(resolve,2000); });\r\n      const data = yield call(() => request.get(\"./products.json\"));\r\n      yield put({ type: \"save\", payload: data });\r\n    },\r\n    *filter({ payload }, { call, put }) {\r\n      const data = yield call(() => request.get(\"./products.json\"));\r\n      const filterData = data.products.filter((item) =>\r\n        item.availableSizes.includes(payload)\r\n      );\r\n      yield put({ type: \"save\", payload: { products: filterData } });\r\n    },\r\n  },\r\n\r\n  reducers: {\r\n    save(state, { payload: data }) {\r\n      // 保存数据到 state\r\n      return { ...state, ...data };\r\n    },\r\n    sort(state, { payload }) {\r\n      const products = [...state.products];\r\n      switch (payload.key) {\r\n        case \"up\":\r\n          products.sort((a, b) => a.price - b.price)\r\n          break;\r\n        case \"down\":\r\n          products.sort((a, b) => b.price - a.price)\r\n          break;\r\n      }\r\n      return { ...state, products };\r\n    }\r\n  },\r\n};\r\n","import dva from \"dva\";\r\nimport \"./index.css\";\r\nimport shop from \"./models/shop\";\r\nimport { createHashHistory } from \"history\";\r\nimport createLoading from 'dva-loading';\r\n// 1. Initialize\r\nconst app = dva({\r\n  history: createHashHistory(),\r\n});\r\n\r\n// 2. Plugins\r\napp.use(createLoading());\r\n\r\n// 3. Model\r\n// app.model(shop);\r\n\r\n// 4. Router\r\napp.router(require(\"./router\").default);\r\n\r\n// 5. Start\r\napp.start(\"#root\");\r\n","import React from \"react\";\r\nimport { Router, Route, Switch } from \"dva/router\";\r\nimport dynamic from \"dva/dynamic\";\r\n\r\nconst menuGlobal = [\r\n  {\r\n    id: \"shop\",\r\n    pid: \"0\",\r\n    name: \"shop\",\r\n    icon: \"shop\",\r\n    path: \"/\",\r\n    models: () => [import(\"./models/shop\"), import(\"./models/cart\")], //models可多个\r\n    component: () => import(\"./routes/ShopCart.jsx\"),\r\n  },\r\n];\r\nfunction RouterConfig({ history, app }) {\r\n  return (\r\n    <Router history={history}>\r\n      <Switch>\r\n        {menuGlobal.map(({ path, ...dynamics }, index) => (\r\n          <Route\r\n            key={index}\r\n            path={path}\r\n            exact\r\n            component={dynamic({\r\n              app,\r\n              ...dynamics,\r\n            })}\r\n          />\r\n        ))}\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default RouterConfig;\r\n"],"sourceRoot":""}